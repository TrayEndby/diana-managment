import React from 'react';
import PlanetPopup from './PlanetPopup';
import * as ROUTES from 'constants/routes';

export default React.memo(({ popupCount, setPopupCount, tasks }) => {
  const total = tasks ? tasks.total : 0;
  const done = tasks ? tasks.done : 0;
  const [showPopup, setShowPopup] = React.useState(false);
  const svgRef = React.useRef(null);

  const handleClosePopup = () => {
    setPopupCount(--popupCount);
    setShowPopup(false);
  };

  const handleShowPopup = () => {
    setPopupCount(++popupCount);
    setShowPopup(true);
  };

  const togglePopup = () => {
    showPopup ? handleClosePopup() : handleShowPopup();
  };
  return (
    <>
      <PlanetPopup
        ref={svgRef}
        isShowed={showPopup}
        handleClose={handleClosePopup}
        planetName="College search"
        planetLink={ROUTES.COLLEGE_SEARCH}
        completedMissions={done}
        allMissions={total}
      />
      <g
        id="planet-college-search"
        transform="translate(-40 -220)"
        className="App-clickable"
        ref={svgRef}
        onClick={togglePopup}
      >
        <path
          d="m146.341 252.3a52.288 52.288 0 0 1 -.478 7.114 52.367 52.367 0 0 1 -8.616 22.55c-.377.579-.78 1.141-1.191 1.7-.806 1.091-1.644 2.156-2.534 3.179a51.368 51.368 0 0 1 -4.026 4.2 52.164 52.164 0 0 1 -6.586 5.235 53.011 53.011 0 0 1 -4.689 2.827h-.009a52.015 52.015 0 0 1 -11.048 4.363c-1.133.3-2.282.579-3.44.8a53 53 0 0 1 -10.386 1.032c-1.032 0-2.063-.034-3.078-.084a52.615 52.615 0 0 1 -25.076-8.012c-.729-.461-1.451-.939-2.156-1.443-.176-.109-.344-.235-.52-.361a52.36 52.36 0 0 1 -5.293-4.328q-1.548-1.436-2.97-2.995c-.269-.285-.52-.571-.78-.864-.864-.973-1.686-1.989-2.458-3.029-.529-.688-1.04-1.4-1.519-2.122-.285-.4-.553-.814-.822-1.233-.6-.932-1.166-1.88-1.686-2.844a50.783 50.783 0 0 1 -3.238-6.947 52.836 52.836 0 0 1 -3.373-16.82c-.025-.6-.033-1.216-.033-1.829v-.089c0-.638.008-1.284.033-1.913.042-1.208.126-2.4.244-3.582a52.758 52.758 0 0 1 2.315-10.923q.78-2.4 1.779-4.689a51.592 51.592 0 0 1 2.818-5.562 53.731 53.731 0 0 1 4.178-6.141c.654-.822 1.326-1.627 2.039-2.416a52.772 52.772 0 0 1 6.594-6.25c.411-.327.83-.654 1.258-.973.486-.361.973-.721 1.476-1.065.411-.286.814-.562 1.233-.831.152-.1.294-.2.445-.294.394-.251.789-.495 1.191-.738h.009c.428-.268.855-.52 1.292-.763.419-.244.847-.478 1.275-.705l.05-.025c.445-.235.9-.461 1.351-.688.419-.21.847-.411 1.283-.612.512-.235 1.032-.47 1.561-.688.419-.177.847-.353 1.275-.52l.075-.026c.47-.184.932-.36 1.41-.528a.059.059 0 0 1 .033-.017c.462-.159.94-.319 1.41-.478h.008c.579-.185 1.158-.369 1.754-.537.352-.1.713-.2 1.073-.294s.722-.193 1.083-.277q1.157-.276 2.34-.5c.319-.067.646-.126.965-.176.377-.067.746-.126 1.124-.185s.747-.109 1.124-.159.755-.092 1.133-.134c.36-.042.721-.076 1.09-.1 1.242-.117 2.5-.184 3.759-.193a.842.842 0 0 1 .142 0c.26-.017.52-.017.78-.017.6 0 1.192.009 1.787.034.571.017 1.141.042 1.7.084.546.033 1.082.075 1.619.126.244.025.479.042.713.075.1.009.2.017.294.034.814.092 1.619.2 2.416.335.084.009.176.025.26.042l.311.051a.375.375 0 0 1 .083.016c.428.068.856.151 1.284.235.017.009.042.009.059.017 1.115.227 2.223.487 3.313.78.554.151 1.1.3 1.645.47s1.09.344 1.627.529 1.066.369 1.594.57c.478.176.948.369 1.418.562.411.168.822.344 1.233.52.294.126.579.26.864.394a.755.755 0 0 1 .143.068c.319.142.637.293.948.453.251.117.5.243.738.369.47.235.931.478 1.393.738.016.008.042.025.058.034a3.377 3.377 0 0 1 .344.192c.227.118.445.244.671.378.277.159.554.319.831.495.277.159.545.336.822.5s.545.336.814.52.528.353.8.537q1.611 1.083 3.137 2.307h.009c.369.294.73.588 1.082.89.2.167.4.344.6.511.092.076.176.151.26.227.294.251.579.512.864.772.327.293.646.587.956.9.378.353.747.722 1.108 1.091.293.3.587.6.872.914a.241.241 0 0 1 .076.084c.26.277.52.554.763.839a3.037 3.037 0 0 1 .227.252c.235.268.469.537.7.805a.008.008 0 0 1 .008.008c.235.261.453.521.655.789.193.235.386.47.57.705.269.335.529.679.789 1.032.327.436.654.872.965 1.325.243.344.486.705.721 1.057q.567.856 1.107 1.737a51.64 51.64 0 0 1 4.279 8.7q.843 2.19 1.485 4.472a51.438 51.438 0 0 1 1.518 7.382c.084.6.151 1.191.21 1.795.151 1.494.235 3 .243 4.522.017.239.017.483.017.725z"
          fill="#a549ff"
        />
        <g fill="#662ef2">
          <path
            d="m120.946 221.19a9.963 9.963 0 0 1 -9.807-5.545c-1.1-2.24-1.418-4.832-2.718-6.963-1.779-2.936-5.126-4.555-8.423-5.5a26.009 26.009 0 0 1 -5.117-1.72 6.936 6.936 0 0 1 -2.467-2.147c.311-.017.612-.017.923-.017.6 0 1.191.008 1.787.033.57.017 1.141.042 1.7.084.545.034 1.082.076 1.619.126.243.025.478.042.713.076.1.008.2.016.294.033.813.092 1.619.2 2.416.336.193.025.386.059.57.092a.346.346 0 0 1 .084.017c.428.067.856.151 1.284.235.016.008.042.008.058.016 1.116.227 2.223.487 3.314.781.554.151 1.1.3 1.644.469s1.091.344 1.628.529 1.065.369 1.594.571c.478.176.948.369 1.418.562.411.167.822.344 1.233.52.293.125.579.26.864.394a.774.774 0 0 1 .142.067c.319.143.638.294.948.453.252.117.495.243.739.369.486.243.973.5 1.451.772a3.622 3.622 0 0 1 .344.193c.226.117.444.243.671.377.277.16.554.319.83.5.277.16.546.336.823.5s.545.335.813.52.529.352.8.537q1.611 1.082 3.138 2.307h.008c.369.293.73.587 1.082.889.2.168.4.344.6.512a7.306 7.306 0 0 1 .093.746c.281 3.986-3.125 7.756-7.093 8.276z"
            opacity=".3"
          />
          <path
            d="m64.076 292.968a3.824 3.824 0 0 1 -1.049 2.794c-.176-.109-.344-.235-.52-.361a53.5 53.5 0 0 1 -9.044-8.188c-.864-.973-1.686-1.988-2.458-3.028-.528-.688-1.04-1.4-1.518-2.123.05 0 .1-.008.151-.008 2.156-.093 5.285.058 6.829 1.745.7.78 1.241 1.7 1.946 2.483a36.638 36.638 0 0 0 3.414 2.919 5.833 5.833 0 0 1 2.249 3.767z"
            opacity=".3"
          />
          <path
            d="m104.035 301.889a10.928 10.928 0 0 1 -.311 2.391 53 53 0 0 1 -10.386 1.02c-1.032 0-2.063-.034-3.078-.084a52.975 52.975 0 0 1 -12.16-2.135c2.081-.143 4.623-.118 5.5-2.165a7.062 7.062 0 0 1 3.1-3.6 4.386 4.386 0 0 1 4.58.235c.6.462 1.057 1.107 1.695 1.527 1.6 1.04 3.7.3 5.537-.235s4.27-.6 5.176 1.091a3.884 3.884 0 0 1 .347 1.955z"
            opacity=".3"
          />
          <path
            d="m97.327 217.546c-.992.229-1.916.711-2.919.882-3.134.537-5.867-1.967-8.208-4.12s-5.619-4.258-8.482-2.874a2.467 2.467 0 0 0 -1.442 1.644 3.251 3.251 0 0 0 .136 1.381c.5 1.98 1.333 4.109 3.161 5.022 2 1 4.426.174 6.617.614 2.985.6 4.962 3.364 6.631 5.911a18.293 18.293 0 0 1 2.036 3.7 26.855 26.855 0 0 0 1.408 4.187c3.475 6.135 12.419 1.32 12.6-4.553.164-5.359-5.723-13.14-11.538-11.794z"
            opacity=".3"
          />
          <path
            d="m63.627 261.915a3.081 3.081 0 0 0 -.05 2.8c.82 1.3 2.9 1.242 3.809 2.483.849 1.158.264 2.779.414 4.208a4.079 4.079 0 0 0 3.07 3.459 2.6 2.6 0 0 0 2.232-.41c.277-.232.484-.542.776-.755a2.4 2.4 0 0 1 2.331-.042c.748.322 1.414.823 2.183 1.089a3.878 3.878 0 0 0 3.221-7.015c-1.331-.776-3.28-.928-3.8-2.378-.419-1.167.432-2.391.531-3.628.339-4.215-4.909-4.014-7.654-4.194a7.115 7.115 0 0 0 -7.063 4.383z"
            opacity=".3"
          />
          <path
            d="m50.931 244.541c-1.174.42-2.634.143-3.532 1-1.107 1.074-.453 2.911-.612 4.447a4.02 4.02 0 0 1 -3.887 3.462 3.875 3.875 0 0 1 -2.559-1.057v-.093c0-.638.008-1.284.033-1.913.042-1.208.126-2.4.244-3.582a52.758 52.758 0 0 1 2.315-10.923q.78-2.4 1.779-4.689h.033a7.12 7.12 0 0 1 6.888 4.648c.951 2.584 3.283 7.291-.702 8.7z"
            opacity=".3"
          />
          <path
            d="m114.364 256.78a3.744 3.744 0 0 0 1.657 1.018c3.5 1.155 7.578-1.076 10.9.5 1.838.872 2.994 2.729 3.847 4.577.763 1.653 1.41 3.441 2.753 4.672s3.677 1.63 4.906.286a4.286 4.286 0 0 0 .818-1.537 8.141 8.141 0 0 0 .271-5.128c-.767-2.34-2.938-3.936-4.072-6.121a7.671 7.671 0 0 1 -.617-5.382c.435-1.7 1.446-3.541.6-5.08a4.583 4.583 0 0 0 -1.381-1.385 16.377 16.377 0 0 0 -7.586-3.507c-2.8-.327-5.926.795-7.244 3.287-.313.593-.518 1.243-.869 1.815-.773 1.262-2.162 2.008-3.126 3.13-1.591 1.861-2.653 6.823-.857 8.855z"
            opacity=".3"
          />
        </g>
        <path
          d="m146.34 252.3a52.272 52.272 0 0 1 -.479 7.113 52.4 52.4 0 0 1 -8.615 22.55c-.378.579-.781 1.141-1.192 1.7-.805 1.091-1.644 2.156-2.533 3.18a51.536 51.536 0 0 1 -4.027 4.2 52.319 52.319 0 0 1 -6.585 5.235 53.124 53.124 0 0 1 -4.69 2.827h-.008a51.968 51.968 0 0 1 -11.049 4.362c35.576-24.889 24.995-73.173 11.619-97.675.017.009.042.026.059.034a3.622 3.622 0 0 1 .344.193c.226.117.444.243.671.377.277.16.554.319.83.5.277.16.546.336.823.5s.545.335.813.52.529.352.8.537q1.611 1.082 3.138 2.307h.008c.369.293.73.587 1.082.889.2.168.4.344.6.512.093.075.177.151.26.226.294.252.579.512.865.772.327.294.646.587.956.9.378.352.747.721 1.107 1.09.294.3.588.6.873.915a.229.229 0 0 1 .075.084c.26.277.52.553.764.839a3.011 3.011 0 0 1 .226.251c.235.269.47.537.7.806a.008.008 0 0 1 .008.008c.235.26.453.52.654.789.193.234.386.469.571.7.268.336.528.68.788 1.032.328.436.655.873.965 1.326.243.344.487.7.722 1.057q.565.855 1.107 1.736a51.608 51.608 0 0 1 4.278 8.7c.563 1.459 1.057 2.953 1.485 4.471a51.316 51.316 0 0 1 1.519 7.383c.084.595.151 1.191.209 1.795.151 1.493.235 2.995.244 4.522.015.248.015.491.015.737z"
          opacity=".05"
        />
        <path
          d="m54.244 288.077c-.269-.285-.521-.57-.781-.864-.864-.973-1.686-1.988-2.458-3.028-.528-.688-1.04-1.4-1.518-2.123-.285-.4-.554-.814-.822-1.233-.6-.931-1.166-1.879-1.686-2.844a50.776 50.776 0 0 1 -3.239-6.946 52.841 52.841 0 0 1 -3.372-16.82c-.025-.638-.034-1.276-.034-1.921s.009-1.284.034-1.913c.042-1.208.126-2.4.243-3.582a52.787 52.787 0 0 1 6.913-21.175 53.808 53.808 0 0 1 4.178-6.14c.654-.823 1.325-1.628 2.038-2.416a52.694 52.694 0 0 1 6.594-6.25c.411-.328.831-.655 1.258-.974.487-.36.973-.721 1.477-1.065.411-.285.814-.562 1.233-.831.151-.1.294-.2.445-.293.394-.252.788-.495 1.191-.738h.008c.428-.269.856-.521 1.292-.764.42-.243.848-.478 1.276-.7l.05-.026c.444-.235.9-.461 1.35-.688.42-.209.848-.411 1.284-.612.512-.235 1.032-.47 1.56-.688.42-.176.848-.352 1.276-.52l.075-.025c.47-.185.931-.361 1.409-.529a.07.07 0 0 1 .034-.016c.461-.16.94-.319 1.409-.479h.009c.579-.184 1.157-.369 1.753-.537.352-.1.713-.2 1.074-.293s.721-.193 1.082-.277q1.158-.277 2.341-.5c.318-.067.646-.126.964-.177.378-.067.747-.125 1.125-.184s.746-.109 1.124-.16.755-.092 1.132-.134c.361-.042.722-.075 1.091-.1 1.241-.118 2.5-.185 3.758-.193a.759.759 0 0 1 .143 0c-17.273 8.868-52.231 34.128-38.313 88.758z"
          fill="#fff"
          opacity=".1"
        />
        <ellipse
          cx="17.966"
          cy="12.961"
          fill="#fff"
          opacity=".1"
          rx="17.966"
          ry="12.961"
          transform="matrix(.328 -.945 .945 .328 59.097 248.699)"
        />
        <path
          d="m92.028 259.563c-1.26 3.631-4.4 5.837-7.023 4.928s-3.721-4.589-2.461-8.219 4.4-5.837 7.024-4.928 3.72 4.589 2.46 8.219z"
          fill="#fff"
          opacity=".1"
        />
        <text x="10" y="350">
          College Search
        </text>
      </g>
      <animateMotion
        xlinkHref="#planet-college-search"
        begin="-5s"
        dur="51s"
        repeatCount="indefinite"
        calcMode="linear"
      >
        <mpath xlinkHref="#ellipse_2" />
      </animateMotion>
    </>
  );
});
